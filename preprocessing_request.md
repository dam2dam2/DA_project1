# 이커머스 주문 데이터 분석을 위한 전처리 요청서

## 1. 목적
본 문서는 이커머스 주문 원본 데이터를 **다양한 데이터 분석이 가능하도록 전처리**하기 위해  
AI에게 수행할 작업을 명확히 지시하기 위한 요청서이다.

전처리 결과는  
- 매출 분석  
- 상품/옵션 분석  
- 고객 분석  
- 마케팅 채널 분석  
- GA4 / BigQuery 연계 분석  
에 활용하는 것을 목표로 한다.

---

## 2. 원본 데이터 설명

### 데이터 성격
- 이커머스 주문 로그 데이터
- 주문 1건당 1행
- 주문, 상품, 고객, 결제 정보가 하나의 테이블에 혼합된 상태

### 주요 컬럼 예시
- 주문번호
- 주문일
- 상품코드
- 상품명
- 주문수량
- 결제금액(상품별)
- 결제금액(통합)
- 공급가
- 주문경로
- 결제방법
- 주문자명
- 주문자연락처
- 주소
- 회원구분
- 쿠폰 사용금액
- 포인트 사용금액

---

## 3. 전처리 기본 원칙

1. **분석 목적 중심으로 테이블을 분리할 것**
2. **상품명에 포함된 복합 정보를 구조화할 것**
3. 개인정보는 분석에 필요한 최소 단위까지만 사용
4. 날짜·금액·수량 컬럼은 분석 가능한 타입으로 변환
5. GA4 및 BigQuery 연계를 고려한 구조로 설계

---

## 4. 테이블 분리 요청 (정규화)

### 4.1 Orders 테이블 (주문 단위)

#### 생성 목적
- 주문·결제·채널·매출 분석

#### 포함 컬럼
- order_id (주문번호)
- order_datetime (주문일)
- order_date (날짜)
- order_hour (시간)
- order_channel (주문경로)
- payment_method (결제방법)
- total_payment_amount (결제금액 통합)
- supply_amount (공급가)
- coupon_amount (쿠폰 사용금액)
- point_amount (포인트 사용금액)
- seller_name (셀러명)

---

### 4.2 Order_Items 테이블 (상품 단위)

#### 생성 목적
- 상품·옵션·중량·이벤트 분석

#### 요청 작업
상품명 컬럼에 포함된 정보를 분리하여 구조화할 것

#### 포함 컬럼
- order_id (주문번호)
- product_code
- product_name (상품 기본명)
- option_type (예: 로얄과, 소과, 중과)
- weight_kg (중량, 숫자형)
- size_range (예: 50~55수)
- quantity (주문수량)
- item_payment_amount (상품별 결제금액)
- is_promotion (1+1, 추가 증정 여부)
- promotion_detail (이벤트 설명)

---

### 4.3 Customers 테이블 (고객 단위)

#### 생성 목적
- 고객 행동 및 세그먼트 분석

#### 개인정보 처리
- 주문자연락처는 해시 처리 또는 익명 ID로 변환

#### 포함 컬럼
- customer_id (연락처 기반 해시 ID)
- member_type (회원 / 비회원)
- region_1 (시/도)
- region_2 (시/군/구)
- first_order_date (첫 구매일)

---

### 4.4 Products 테이블 (상품 마스터)

#### 생성 목적
- 상품 중복 제거 및 카테고리 분석

#### 포함 컬럼
- product_code
- product_category (예: 감귤, 황금향)
- harvest_type (노지 / 하우스)
- base_weight_kg

---

## 5. 파생 컬럼 생성 요청

아래 파생 컬럼을 생성할 것:

### 가격/수익성 관련
- price_per_kg = 상품별 결제금액 / 중량
- margin = 결제금액(상품별) - 공급가
- margin_rate = margin / 결제금액

### 시간 관련
- weekday (요일)
- is_weekend (주말 여부)
- time_slot (아침/점심/저녁/야간)

### 마케팅 관련
- channel_group (SNS / 검색 / 기타)
- is_high_price (고가 상품 여부, 기준값 명시)

---

## 6. 데이터 타입 및 품질 요구사항

- 날짜/시간: TIMESTAMP 또는 DATE
- 금액/수량: INTEGER 또는 FLOAT
- 카테고리 값은 표준화된 문자열로 통일
- 결측값 발생 시 처리 방식 명시 (NULL / 0 / 제거)

---

## 7. 최종 산출물 요청

AI는 아래 결과를 제공할 것:

1. 전처리된 테이블 구조 설명
2. 컬럼별 의미 정의
3. 전처리 전/후 데이터 예시
4. 분석 가능 시나리오 예시 5가지 이상
5. GA4 / BigQuery 연계 시 활용 포인트

---

## 8. 참고 분석 목표 예시

- 채널별 객단가 비교
- 옵션/중량에 따른 가격 민감도 분석
- 회원 vs 비회원 구매 패턴 차이
- 이벤트 상품의 매출 기여도
- 시간대별 고가 상품 구매 비중

---

## 9. 요청 요약

> 본 전처리는  
> “원본 주문 데이터를 실무 수준의 분석 데이터셋으로 변환”  
> 하는 것을 최종 목표로 한다.
